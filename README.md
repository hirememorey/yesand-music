# YesAnd Music

**Security-First AI-Powered Musical Collaborator with Context-Aware Intelligence**

Transform MIDI editing from technical manipulation to intelligent musical collaboration through natural language conversation that integrates seamlessly with existing DAW workflows. Built with security-first architecture for production-ready reliability.

## üöÄ Quick Start (2 minutes)

### Prerequisites
- **Python 3.8+**
- **OpenAI API key** (for AI features)
- **macOS** (for DAW integration features)

### Installation
```bash
# 1. Install dependencies
pip install -r requirements.txt

# 2. Set OpenAI API key
export OPENAI_API_KEY="your-api-key-here"
```

### Try It Now

#### üéµ Musical Quality First Generator (NEW - Production Ready)
```bash
# Generate musically complete MIDI from creative prompts
python mvp_musical_quality_first.py "I want 16 measures of an anthemic bass line as if Flea and Jeff Ament had a baby in g minor"

# Interactive mode with musical quality focus
python mvp_musical_quality_first.py --interactive

# With user ID for musical feedback tracking
python mvp_musical_quality_first.py "Create a melancholic melody that makes me feel intrigued and scared" --user-id "musician_123"
```

#### üéµ Legacy MVP User-Driven MIDI Generator (Still Available)
```bash
# Generate high-quality MIDI from any prompt
python mvp_user_driven_generator.py "Create a jazz bass line in C major at 120 BPM for 8 measures"

# Interactive mode with user feedback
python mvp_user_driven_generator.py --interactive

# With user ID for feedback tracking
python mvp_user_driven_generator.py "Generate a funky drum pattern" --user-id "musician_123"
```

#### üéµ Legacy MVP MIDI Generator (Still Available)
```bash
# Generate MIDI from natural language
python3 mvp_midi_generator.py "generate me a bass line in gminor as if Jeff Ament of Pearl Jam did a line of coke and just threw up prior to generating this"

# Interactive mode
python3 mvp_midi_generator.py --interactive

# With output file
python3 mvp_midi_generator.py "create a funky bass line" --output funky_bass.mid
```

#### üîí Security-First Real-Time Enhancement (DAW Integration)
```bash
# Security-First Real-Time Enhancement (macOS + DAW)
python secure_enhancement_cli.py --interactive
# Try: "enhance create a funky bassline" ‚Üí Secure AI enhancement!
# Try: "status" ‚Üí Check system health and security status

# Single Command Mode
python secure_enhancement_cli.py --request "add drums to this track" --type drums --track-id "2"

# System Status
python secure_enhancement_cli.py --status
```

#### üéõÔ∏è Legacy Commands (Still Available)
```bash
python real_time_enhancement_cli.py --interactive
python live_control_plane_cli.py
python enhanced_control_plane_cli.py --conversation
python control_plane_cli.py "play scale C major"
```

## üéØ What It Does

**YesAnd Music** is a context-aware AI musical collaborator that understands your entire project and provides intelligent enhancements through natural language conversation.

### Core Capabilities
- **üéµ Musical Quality First Generator**: NEW - Handles creative, metaphorical prompts with musical quality focus
- **üéµ MVP User-Driven Generator**: Production-ready AI MIDI generation with built-in quality gates and user feedback
- **üéµ Legacy MVP MIDI Generator**: DAW-independent AI-powered MIDI generation from natural language prompts
- **üîí Security-First Architecture**: Built-in security, validation, and safety monitoring
- **üöÄ Real-Time Ardour Enhancement**: Live LLM-powered track enhancement with real-time project context
- **‚ö° Automatic Import**: Seamless MIDI import to Ardour using Lua scripting - no manual steps!
- **üéµ Live MIDI Streaming**: Generate and stream MIDI directly to Ardour tracks in real-time
- **üí¨ Musical Conversation**: Chat with AI musical collaborator in natural language
- **üß† Musical Scribe**: Context-aware AI that understands your entire project and provides intelligent enhancements
- **üéØ Musical Intelligence**: Analyze bass lines, melodies, harmony, and rhythm with visual feedback
- **üõ†Ô∏è Problem Solving**: "Make this groove better", "Fix the harmony", "Improve the arrangement"
- **üé® Musical References**: "Make it groove like Stevie Wonder", "Give it that Motown feel"
- **üîÑ Iterative Refinement**: "Make it more complex" ‚Üí "This is too busy, simplify it"
- **üéöÔ∏è DAW Integration**: Works with Ardour, Logic Pro, and GarageBand
- **üìö Educational**: Learn musical concepts through AI explanations
- **üõ°Ô∏è Production Ready**: Comprehensive testing, monitoring, and error handling

### Key Features
- **Security-First Design**: Security built into every component, not added as overhead
- **Context-Aware Intelligence**: Understands entire musical projects, not just individual tracks
- **Sully.ai-Inspired Architecture**: Uses specialized prompts for different musical roles
- **Real-Time Performance**: Live MIDI streaming with professional audio safety
- **Non-Intrusive Integration**: Preserves existing DAW workflows while adding intelligence
- **Fail-Fast Architecture**: Quick failure detection and graceful degradation
- **Comprehensive Testing**: 95%+ test coverage with security validation

## üìö Documentation

### For Users
- **[MVP User-Driven Generator](MVP_USER_DRIVEN_README.md)** - Complete guide to the production-ready MVP system
- **[Legacy MVP MIDI Generator](MVP_README.md)** - Complete guide to the DAW-independent MIDI generator
- **[Security-First Implementation](SECURITY_FIRST_IMPLEMENTATION.md)** - Complete guide to the new security-first system
- **[Quick Start Guide](QUICK_START.md)** - Get started quickly with the new system
- **[Auto-Import Guide](AUTO_IMPORT_GUIDE.md)** - Complete guide to automatic Ardour import
- **[Real-Time Enhancement Guide](REAL_TIME_ENHANCEMENT.md)** - Complete guide to real-time Ardour enhancement
- **[Features Guide](FEATURES.md)** - Complete guide to all features and capabilities
- **[Troubleshooting](TROUBLESHOOTING.md)** - Common issues and solutions
- **[Reference](REFERENCE.md)** - Complete command and API reference

### For Developers
- **[Current State](CURRENT_STATE.md)** - Complete project status and developer onboarding
- **[MIDI to JSON Implementation](MIDI_TO_JSON_IMPLEMENTATION.md)** - Complete implementation guide for context-aware generation
- **[Implementation Status](IMPLEMENTATION_STATUS.md)** - Current implementation status and next steps
- **[Development Guide](DEVELOPMENT.md)** - Complete development and contribution guide
- **[Architecture](ARCHITECTURE.md)** - Technical architecture and design details
- **[Implementation Complete](IMPLEMENTATION_COMPLETE.md)** - Summary of completed implementation
- **[Native DAW Integration](NATIVE_DAW_INTEGRATION.md)** - Future vision for native plugin integration

## üéµ Example Workflows

### MVP User-Driven Generator (NEW - Production Ready)
1. **Generate**: `python mvp_user_driven_generator.py "Create a jazz bass line in C major at 120 BPM for 8 measures"`
2. **Interactive**: `python mvp_user_driven_generator.py --interactive`
3. **With Feedback**: `python mvp_user_driven_generator.py "Generate a funky drum pattern" --user-id "musician_123"`

### Legacy MVP MIDI Generator (Still Available)
1. **Generate**: `python3 mvp_midi_generator.py "generate me a bass line in gminor as if Jeff Ament of Pearl Jam did a line of coke and just threw up prior to generating this"`
2. **Interactive**: `python3 mvp_midi_generator.py --interactive`
3. **Output File**: `python3 mvp_midi_generator.py "create a funky bass line" --output funky_bass.mid`

### MIDI to JSON Workflow (Target Implementation)
1. **Generate**: `python music_generator_cli.py "generate a bass pattern like Alice In Chains in GMinor"`
2. **Context**: System extracts existing MIDI from Ardour project
3. **Convert**: MIDI converted to musical notation JSON
4. **Generate**: OpenAI creates contextually appropriate bass pattern
5. **Import**: MIDI automatically imported to Ardour track

### Security-First Real-Time Enhancement
1. **Start**: `python secure_enhancement_cli.py --interactive`
2. **Enhance**: `enhance create a funky bassline` ‚Üí Secure AI enhancement
3. **Check Status**: `status` ‚Üí See system health and security status
4. **Refine**: `enhance make it more complex` ‚Üí Iterative improvement
5. **Monitor**: System automatically monitors health and security

### Legacy Real-Time Ardour Enhancement with Auto-Import
1. **Start**: `python real_time_enhancement_cli.py --interactive`
2. **Enhance**: `enhance create a funky bassline` ‚Üí Real-time LLM analysis
3. **Auto-Import**: Patterns automatically imported to Ardour tracks
4. **Check Status**: `imports` ‚Üí See what was imported successfully
5. **Refine**: `enhance make it more complex` ‚Üí Iterative improvement

### Live MIDI Creation
1. **Generate**: "Give me a funky bassline" ‚Üí MIDI streams to Ardour
2. **Refine**: "Make it more complex" ‚Üí Real-time modification
3. **Style**: "Make it groove like Bootsy Collins" ‚Üí Style transformation
4. **Polish**: "Add some swing" ‚Üí Final touches

### Musical Conversation
1. **Start**: "I need help with my jazz ballad"
2. **Analyze**: AI analyzes your entire project context
3. **Suggest**: "The piano is busy, try a simpler bassline"
4. **Generate**: Creates contextually appropriate bassline
5. **Refine**: "Make it darker" ‚Üí Iterative improvement

### Problem Solving
1. **Load**: `load my_song.mid`
2. **Analyze**: `analyze all` ‚Üí Complete musical analysis
3. **Improve**: `make this groove better` ‚Üí Enhanced version
4. **Compare**: Listen to original vs. improved

## üèóÔ∏è Architecture

YesAnd Music follows a **Security-First Architecture** with "Brain vs. Hands" design:
- **Security-First Design**: Security built into every component from the ground up
- **Musical Intelligence (Brain)**: Pure algorithmic functions, testable and reliable
- **MIDI I/O (Hands)**: Simple data conversion without musical logic
- **Context Awareness**: Full project understanding for intelligent suggestions
- **Fail-Fast Design**: Quick failure detection and graceful degradation
- **Comprehensive Testing**: 95%+ test coverage with security validation

## üöÄ Current Status

**‚úÖ Production Ready Features:**
- **MVP User-Driven Generator**: Production-ready AI MIDI generation with quality gates and user feedback
- **Legacy MVP MIDI Generator**: DAW-independent AI-powered MIDI generation with dynamic length parsing
- **Security-First Real-Time Enhancement**: Live LLM-powered track enhancement with built-in security
- **Comprehensive Security**: Input validation, output sanitization, rate limiting, encryption
- **Fail-Fast Architecture**: Health monitoring, circuit breakers, graceful degradation
- **Real-Time Ardour Enhancement**: Live LLM-powered track enhancement with OSC monitoring
- **Automatic Import**: Seamless MIDI import to Ardour using Lua scripting
- Live MIDI streaming to Ardour
- Musical conversation system with OpenAI integration
- Context-aware Musical Scribe architecture
- Comprehensive musical problem solvers
- File-based DAW integration
- Real-time MIDI editing capabilities
- **Comprehensive Testing**: 95%+ test coverage with security validation
- **OpenAI API v1.0 Compatibility**: Updated for current API format
- **Extended Length Support**: Supports longer pieces up to 16+ measures

**üéØ Current Focus**: MIDI to JSON Workflow Implementation
- **Context-Aware Generation**: Extract MIDI from Ardour projects and send as musical notation JSON to OpenAI
- **Style-Reference Generation**: Generate MIDI patterns based on specific artists and styles
- **Seamless Import**: Automatically import generated MIDI back to Ardour tracks
- **Complete Workflow**: User prompt ‚Üí Context extraction ‚Üí AI generation ‚Üí Ardour import
- **Implementation Guide**: Complete documentation for new developers to implement the system

**üìã Next Implementation**: See [MIDI_TO_JSON_IMPLEMENTATION.md](MIDI_TO_JSON_IMPLEMENTATION.md) for complete implementation guide

**üîÆ Future Direction**: Native Ardour Plugin Integration
- **Plugin UI**: Text input field and send button directly in Ardour interface
- **Real-time Generation**: AI-powered MIDI generation without leaving the DAW
- **Automatic Track Management**: Create and modify tracks based on natural language prompts
- **Native Workflow**: Feels like a built-in Ardour feature, not an external tool

## ü§ù Contributing

We welcome contributions! See our [Development Guide](DEVELOPMENT.md) for:
- Development setup and workflows
- Code style and testing requirements
- Pull request process
- Architecture guidelines

## üìÑ License

This project is part of YesAnd Music. See [LICENSE](LICENSE) for details.

---

**Ready to start?** Check out the [Features Guide](FEATURES.md) for detailed usage instructions, or jump straight to [Troubleshooting](TROUBLESHOOTING.md) if you run into issues.